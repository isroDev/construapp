<!DOCTYPE html>
<html lang="Es">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Constru App | RECURSOS HUMANO</title>
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
    <link rel="stylesheet" href="plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" href="plugins/datatables-responsive/css/responsive.bootstrap4.min.css">
    <link rel="stylesheet" href="plugins/datatables-buttons/css/buttons.bootstrap4.min.css">
    <link rel="stylesheet" href="dist/css/adminlte.min.css">
    <link rel="stylesheet" href="../administrator/dist/css/fine-uploader-new.css">
    <link rel="stylesheet" href="../administrator/plugins/select2/css/select2.min.css">






    <style>
        #imageUpload {
            display: none;
        }

        #profileImage {
            cursor: pointer;
        }

        #profile-container {
            width: 100%;
            height: 200px;
            overflow: hidden;

        }

        #profile-container img {
            width: 200px;
            height: 200px;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);

        }

        .select2-selection__arrow {
            height: 34px !important;
        }

        #trigger-upload {
            color: white;
            background-color: #00ABC7;
            font-size: 14px;
            padding: 7px 20px;
            background-image: none;
        }

        #fine-uploader-manual-trigger .qq-upload-button {
            margin-right: 15px;
        }

        #fine-uploader-manual-trigger .buttons {
            width: 36%;
        }

        #fine-uploader-manual-trigger .qq-uploader .qq-total-progress-bar-container {
            width: 60%;
        }

        small {
            color: red;
        }
    </style>


</head>

<body class="hold-transition sidebar-mini layout-fixed">
    <div class="wrapper">


        <div class="preloader flex-column justify-content-center align-items-center">
            <img class="animation__shake" src="../img/AdminLTELogo.png"  height="60" width="60">
          </div>
          <nav class="main-header navbar navbar-expand navbar-white navbar-light">
      
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
              </li>
              <li class="nav-item d-none d-sm-inline-block">
                <a href="#" class="nav-link">Nueva Trabajador</a>
              </li>
      
            </ul>
            <ul class="navbar-nav ml-auto">
      
              <li class="nav-item dropdown">
                <a class="nav-link" id="user" data-toggle="dropdown" href="#"></a>
                <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                  <a href="../controllers/logout.php" class="dropdown-item">Logout</a>
      
      
                </div>
              </li>
      
            </ul>
          </nav>
      
          <aside class="main-sidebar sidebar-dark-primary elevation-4">
      
            <a href="#" class="brand-link">
              <p class="brand-text font-weight-light" style="text-align: center; font-size: 30px; letter-spacing: 1px">CONSTRU
                <strong>APP</strong>
              </p>
            </a>
      
      
            <div class="sidebar">
      
              <div class="user-panel mt-3 pb-3 mb-3 d-flex">
                <div class="image">
      
                  <i class="fas fa-search fa-user" style="font-size: 24px; color: #fff; margin-top: 12px"></i>
                </div>
                <div class="info">
                  <a href="#" class="d-block" id="sidebar_username"></a>
                  <a class="d-block" id="sidebar_user_role" style="font-size: 14px; color: #fff; font-weight: 500; letter-spacing: 1px;"></a>
                </div>
              </div>
      
      
      
              <nav class="mt-2">
                <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
      
                    <li class="nav-header" style="letter-spacing: 1px;">RECURSOS HUMANO</li>

            <li class="nav-item">
              <a href="#" class="nav-link">
                <i class="fas fa-user-friends nav-icon"></i>
                <p>
                  Trabajadores
                  <i class="right fas fa-angle-left"></i>
                </p>
              </a>
              <ul class="nav nav-treeview">
                <li class="nav-item">
                  <a href="workers-list.html" class="nav-link">
                    <i class="fas fa-list nav-icon"></i>
                    <p>Lista trabajador</p>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="new-worker.html" class="nav-link">
                    <i class="fas fa-user-plus nav-icon"></i>
                    <p>Nuevo trabajador</p>
                  </a>
                </li>
                

              </ul>
            </li>
            
            <li class="nav-item">
              <a href="#" class="nav-link">
                <i class="nav-icon fas fa-file-alt"></i>
                <p>
                  Multas
                  <i class="right fas fa-angle-left"></i>
                </p>
              </a>
              <ul class="nav nav-treeview">
                <li class="nav-item">
                  <a href="fine-worker.html" class="nav-link">
                    <i class="fas fa-list nav-icon"></i>
                    <p>Lista multa Trabajadores</p>
                  </a>
                </li>
                
              </ul>
            </li>

                <li class="nav-item">
                  <a href="comments.html" class="nav-link">
                    <i class="fas fa-comments nav-icon"></i>
                    <p>Comentarios</p>
                  </a>
                 
                </li>
              

      
                  <li class="nav-item">
                    <a href="../controllers/logout.php" class="nav-link">
                      <i class="nav-icon far fa-circle text-warning"></i>
                      <p>Cerrar Sesión</p>
                    </a>
                  </li>
      
                </ul>
              </nav>
      
            </div>
      
          </aside>


        <div class="content-wrapper" style="overflow: hidden">
            <section class="content-header">
                <div class="container-fluid">
                    <div class="row mb-2">
                        <div class="col-sm-6">
                            <h1>Trabajador</h1>
                        </div>
                        <div class="col-sm-6">
                            <ol class="breadcrumb float-sm-right">
                                <li class="breadcrumb-item"><a href="#">Home</a></li>
                                <li class="breadcrumb-item active">Trabajador </li>
                            </ol>
                        </div>
                    </div>
                </div>
            </section>
            <section class="content">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-12">


                            <div class="card card-default">

                                <form href="#" id="WorkerForm" enctype="multipart/form-data">
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-8">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label
                                                                style="font-weight: 500; font-size: 14px">Obra</label>
                                                            <select class="form-control form-control-sm"
                                                                id="construction" name="construction">
                                                                <option value="">Seleccionar Construcción</option>

                                                            </select>
                                                            <small></small>
                                                        </div>

                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label
                                                                style="font-weight: 500; font-size: 14px">Empresa</label>
                                                            <input type="text" class="form-control form-control-sm"
                                                                id="business" name="business" readonly />
                                                            <small></small>
                                                        </div>

                                                    </div>


                                                </div>
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <h4>Datos Personales</h4>
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label style="font-weight: 500; font-size: 14px">Rut
                                                                        Trabajador</label>
                                                                    <input type="text"
                                                                        class="form-control form-control-sm" id="rut"
                                                                        name="rut" minlength="9" maxlength="10" title="Ingresar Rut" placeholder="12345678-9"/>
                                                                    <small></small>
                                                                </div>

                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label
                                                                        style="font-weight: 500; font-size: 14px">Nombres
                                                                        Trabajador</label>
                                                                    <input type="text"
                                                                        class="form-control form-control-sm"
                                                                        id="name_worker" name="name_worker" />
                                                                    <small></small>
                                                                </div>

                                                            </div>




                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label
                                                                        style="font-weight: 500; font-size: 14px">Apellido
                                                                        Paterno</label>
                                                                    <input type="text"
                                                                        class="form-control form-control-sm"
                                                                        id="lastname_worker" name="lastname_worker" />
                                                                    <small></small>
                                                                </div>

                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label
                                                                        style="font-weight: 500; font-size: 14px">Apellido
                                                                        Materno</label>
                                                                    <input type="text"
                                                                        class="form-control form-control-sm"
                                                                        id="worker_mother" name="worker_mother" />
                                                                    <small></small>
                                                                </div>

                                                            </div>





                                                        </div>

                                                    </div>



                                                </div>



                                            </div>
                                            <div class="col-md-4 mx-auto text-center">
                                                <label
                                                    style="font-weight: 500; font-size: 14px; margin-bottom: 10px;">Image
                                                    Trabajador</label>

                                                <div id="profile-container">

                                                    <image id="profileImage" src="./dist/img/avatar5.png" />
                                                </div>
                                                <input id="imageUpload" type="file" name="profile_photo"
                                                    placeholder="Photo" required="" capture>
                                                <small id="profile_error"></small>



                                            </div>



                                        </div>
                                        <div class="row">

                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Género</label>
                                                    <select class="form-control form-control-sm" id="gender"
                                                        name="gender">
                                                        <option value="">Seleccione Género</option>
                                                        <option value="M">Masculino</option>
                                                        <option value="F">Mujer</option>
                                                        <option value="O">Otra</option>
                                                    </select>
                                                    <small></small>
                                                </div>

                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Correo</label>
                                                    <input type="text" class="form-control form-control-sm" id="email"
                                                        name="email" placeholder="ejemplo@contruapp.com"/>
                                                    <small></small>

                                                </div>

                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Previsión</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        id="forecast" name="forecast" />
                                                    <small></small>

                                                </div>

                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Región</label>
                                                    <input type="text" class="form-control form-control-sm" id="region"
                                                        name="region" />
                                                    <small></small>

                                                </div>

                                            </div>

                                        </div>
                                        <div class="row">

                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Comuna</label>
                                                    <input type="text" class="form-control form-control-sm" id="commune"
                                                        name="commune" />
                                                    <small></small>
                                                </div>

                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Fecha
                                                        Nacimiento</label>
                                                    <input placeholder="Fecha"
                                                        class="form-control mb-2 mr-sm-2 form-control-sm" type="date"
                                                        id="birth_date" name="birth_date">
                                                    <small></small>

                                                </div>

                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Teléfono</label>
                                                    <input type="number" class="form-control form-control-sm"
                                                        id="telephone" name="telephone" minlength="9" maxlength="9" title="Requiere de 9 caracteres" placeholder="912345678"/>
                                                    <small></small>

                                                </div>

                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">AFP</label>
                                                    <input type="text" class="form-control form-control-sm" id="afp"
                                                        name="afp" />
                                                    <small></small>

                                                </div>

                                            </div>

                                        </div>
                                        <div class="row">

                                            <div class="col-lg-12">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Dirección</label>
                                                    <textarea id="address" name="address" class="form-control"
                                                        rows="4"></textarea>
                                                    <small></small>
                                                </div>

                                            </div>





                                        </div>
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <h4>En Caso De Emergencia Llamar a</h4>

                                            </div>

                                        </div>
                                        <div class="row">

                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Nombre</label>
                                                    <input type="text" class="form-control form-control-sm" id="name"
                                                        name="name" />
                                                    <small></small>
                                                </div>

                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Parentesco</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        id="relation" name="relation" />
                                                    <small></small>

                                                </div>

                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Teléfono</label>
                                                    <input type="number" class="form-control form-control-sm"
                                                        id="emergency_phone" name="emergency_phone" minlength="9" maxlength="9" title="Requiere de 9 caracteres" placeholder="912345678" />
                                                    <small></small>

                                                </div>

                                            </div>


                                        </div>
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <h4>Datos Laborales</h4>

                                            </div>

                                        </div>
                                        <div class="row">

                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Fecha De Inicio De
                                                        Actividad</label>
                                                    <input placeholder="Fecha"
                                                        class="form-control mb-2 mr-sm-2 form-control-sm" type="date"
                                                        id="start_date" name="start_date">
                                                    <small></small>
                                                </div>

                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Tipo de
                                                        Contrato</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        id="contract_typ" name="contract_typ" />
                                                    <small></small>

                                                </div>

                                            </div>
                                            <div class="col-md-3">
                                                
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Estado</label>
                                                    <select class="form-control form-control-sm"
                                                        id="condition" name="condition">
                                                        <option value="Activo"> Activo</option>
                                                        <option value="Inactivo">Inactivo</option>
                                                    </select>
                                                    <small></small>

                                                    
                                                </div>

                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Cargo</label>
                                                    <input type="text" class="form-control form-control-sm" id="post"
                                                        name="post" />
                                                    <small></small>

                                                </div>

                                            </div>


                                        </div>
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <h4>Documentos</h4>
                                                <div id="fine-uploader-manual-trigger"></div>
                                                <small></small>


                                            </div>

                                        </div>
                                        <div class="row" style="margin-top: 40px">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <button class="btn btn-primary"
                                                        style="float: right; margin-bottom: 20px"
                                                        type="submit">Entregar</button>

                                                </div>

                                            </div>

                                        </div>





                                    </div>
                                </form>

                            </div>

                        </div>

                    </div>

                </div>

            </section>

        </div>

        <footer class="main-footer">
            <p style="text-align: center">Copyright &copy; 2021 <a href="#">ConstruApp</a>. All rights reserved.</p>


        </footer>
        <aside class="control-sidebar control-sidebar-dark">
        </aside>
    </div>
    
    <script src="plugins/jquery/jquery.min.js"></script>
    <script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="plugins/datatables/jquery.dataTables.min.js"></script>
    <script src="plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
    <script src="plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
    <script src="plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
    <script src="plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
    <script src="plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
    <script src="plugins/jszip/jszip.min.js"></script>
    <script src="plugins/pdfmake/pdfmake.min.js"></script>
    <script src="plugins/pdfmake/vfs_fonts.js"></script>
    <script src="plugins/datatables-buttons/js/buttons.html5.min.js"></script>
    <script src="plugins/datatables-buttons/js/buttons.print.min.js"></script>
    <script src="plugins/datatables-buttons/js/buttons.colVis.min.js"></script>
    <script src="dist/js/adminlte.min.js"></script>
    <script src="dist/js/demo.js"></script>
    <script src="dist/js/functions.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.3.5/js/locales/nl.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/0.8.3/purify.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.4.2/Sortable.js"></script>
    <script src="dist/js/functions.js"></script>
    <script src="../administrator/dist/js/jquery.fine-uploader.js"></script>
    <script src="../administrator/plugins/select2/js/select2.min.js"></script>
    <script src="dist/js/jquery.validate.min.js"></script>
    <script src="dist/js/additional-methods.min.js"></script>



    <script type="text/template" id="qq-template-manual-trigger">
        <div class="qq-uploader-selector qq-uploader" qq-drop-area-text="Drop files here">
            <div class="qq-total-progress-bar-container-selector qq-total-progress-bar-container">
                <div role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="qq-total-progress-bar-selector qq-progress-bar qq-total-progress-bar"></div>
            </div>
            <div class="qq-upload-drop-area-selector qq-upload-drop-area" qq-hide-dropzone>
                <span class="qq-upload-drop-area-text-selector"></span>
            </div>
            <div class="buttons">
                <div class="qq-upload-button-selector qq-upload-button">
                    <div>Archivos</div>
                </div>
                
            </div>
            <span class="qq-drop-processing-selector qq-drop-processing">
                <span>Procesando Archivos Caídos...</span>
                <span class="qq-drop-processing-spinner-selector qq-drop-processing-spinner"></span>
            </span>
            <ul class="qq-upload-list-selector qq-upload-list" aria-live="polite" aria-relevant="additions removals">
                <li>
                    <div class="qq-progress-bar-container-selector">
                        <div role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="qq-progress-bar-selector qq-progress-bar"></div>
                    </div>
                    <span class="qq-upload-spinner-selector qq-upload-spinner"></span>
                    <img class="qq-thumbnail-selector" qq-max-size="100" qq-server-scale>
                    <span class="qq-upload-file-selector qq-upload-file"></span>
                    <span class="qq-edit-filename-icon-selector qq-edit-filename-icon" aria-label="Edit filename"></span>
                    <input class="qq-edit-filename-selector qq-edit-filename" tabindex="0" type="text">
                    <span class="qq-upload-size-selector qq-upload-size"></span>
                    <button type="button" class="qq-btn qq-upload-cancel-selector qq-upload-cancel">Cancelar</button>
                    <button type="button" class="qq-btn qq-upload-retry-selector qq-upload-retry">Rever</button>
                    <button type="button" class="qq-btn qq-upload-delete-selector qq-upload-delete">Borrar</button>
                    <span role="status" class="qq-upload-status-text-selector qq-upload-status-text"></span>
                </li>
            </ul>

            <dialog class="qq-alert-dialog-selector">
                <div class="qq-dialog-message-selector"></div>
                <div class="qq-dialog-buttons">
                    <button type="button" class="qq-cancel-button-selector">Close</button>
                </div>
            </dialog>

            <dialog class="qq-confirm-dialog-selector">
                <div class="qq-dialog-message-selector"></div>
                <div class="qq-dialog-buttons">
                    <button type="button" class="qq-cancel-button-selector">No</button>
                    <button type="button" class="qq-ok-button-selector">Yes</button>
                </div>
            </dialog>

            <dialog class="qq-prompt-dialog-selector">
                <div class="qq-dialog-message-selector"></div>
                <input type="text">
                <div class="qq-dialog-buttons">
                    <button type="button" class="qq-cancel-button-selector">Cancel</button>
                    <button type="button" class="qq-ok-button-selector">Ok</button>
                </div>
            </dialog>
        </div>
    </script>


    <!-- <script src="https://releases.transloadit.com/uppy/v1.31.0/uppy.min.js"></script> -->
    <script>
        $("#profileImage").click(function (e) {
            $("#imageUpload").click();
        });

        function fasterPreview(uploader) {
            if (uploader.files && uploader.files[0]) {
                $('#profileImage').attr('src',
                    window.URL.createObjectURL(uploader.files[0]));
            }
        }

        $("#imageUpload").change(function () {
            fasterPreview(this);
        });
    </script>


    <script>
        $(document).ready(function () {

            $("#WorkerForm").on("submit", function (e) {
                e.preventDefault();
                var files = $('#fine-uploader-manual-trigger').fineUploader('getUploads');
                var src = $('#profileImage').attr('src').split('/');
                var file = src[src.length - 1];
                var valid = $("#WorkerForm").valid();
                if (valid == true) {
                    var form = $("#WorkerForm")[0];
                    var workerData = new FormData(form);
                    workerData.append("action", "register-worker");
                    $.each(files, function(index, item){
                        workerData.append("worker_files[]", item["file"]);
                        
                    });

                    $.ajax({
                        url: "../controllers/administrator.php",// your request url
                        data: workerData,
                        processData: false,
                        contentType: false,
                        dataType    : "JSON",
                        type: 'POST',
                        success: function (response) 
                        {
                            if(response["login"] == false)
                            {
                                window.location.href    =   "../index.html";

                            }
                            if(response["login"] == true)
                            {
                                if(response["status"] == true)
                                {
                                    alert("Trabajador(a) Registrado Con éxito");
                                    window.location.reload();
                                }
                                if(response["status"] == false)
                                {
                                    alert("Ocurrió Un Error. Por Favor, Inténtelo De Nuevo Más Tarde");
                                }

                            }
                        },
                        error: function () {

                        }
                    });

                }



            });


            $("#WorkerForm").validate({
                rules:
                {
                    construction:
                    {
                        required: true,

                    },
                    rut:
                    {
                        required: true,
                    },
                    name_worker:
                    {
                        required: true,
                        lettersonly: true
                    },
                    lastname_worker:
                    {
                        required: true,
                        lettersonly: true
                    },
                    worker_mother:
                    {
                        required: true,
                        lettersonly: true
                    },
                    gender:
                    {
                        required: true,
                    },
                    email:
                    {
                        required: true,
                        email: true
                    },
                    forecast:
                    {
                        required: true,
                    },
                    region:
                    {
                        required: true,
                    },
                    commune:
                    {
                        required: true,
                    },
                    birth_date:
                    {
                        required: true,
                    },
                    telephone:
                    {
                        required: true,
                    },
                    afp:
                    {
                        required: true,
                    },
                    address:
                    {
                        required: true,
                    },
                    name:
                    {
                        required: true,
                        lettersonly: true
                    },
                    relation:
                    {
                        required: true,
                        lettersonly: true
                    },
                    emergency_phone:
                    {
                        required: true,
                    },
                    start_date:
                    {
                        required: true,
                    },
                    contract_typ:
                    {
                        required: true,
                    },
                    condition:
                    {
                        required: true,
                    },
                    post:
                    {
                        required: true,
                    },

                },
                messages:
                {
                    construction:
                    {
                        required: "Este Campo Es Obligatorio",

                    },
                    rut:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    name_worker:
                    {
                        required: "Este Campo Es Obligatorio",
                        lettersonly: "Nombre Inválido"
                    },
                    lastname_worker:
                    {
                        required: "Este Campo Es Obligatorio",
                        lettersonly: "Nombre Inválido"
                    },
                    worker_mother:
                    {
                        required: "Este Campo Es Obligatorio",
                        lettersonly: "Nombre Inválido"
                    },
                    gender:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    email:
                    {
                        required: "Este Campo Es Obligatorio",
                        email: "Por Favor, Introduzca Un Correo Electrónico Válido"
                    },
                    forecast:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    region:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    commune:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    birth_date:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    telephone:
                    {
                        required: "Este Campo Es Obligatorio",
                        telephone:"Por favor, introduzca un número de telefono"
                    },
                    afp:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    address:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    name:
                    {
                        required: "Este Campo Es Obligatorio",
                        lettersonly: "Nombre Inválido"
                    },
                    relation:
                    {
                        required: "Este Campo Es Obligatorio",
                        lettersonly: "Relación Inválido"
                    },
                    emergency_phone:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    start_date:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    contract_typ:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    condition:
                    {
                        required: "Este Campo Es Obligatorio",

                    },
                    post:
                    {
                        required: "Este Campo Es Obligatorio",

                    },



                },
                errorPlacement: function (error, element) {

                    $(element).next("small").text($(error).text());
                },
                success: function (element) {
                    $(element).next("small").text("");
                },

            });

            var res = getUser();
            if (res["login"] == false) {
                window.location.href = "../index.html";
            }
            if (res["user"]) {

                $("#user").text(res["user"]["NAME"]);
                $("#user_role").text(res["user"]["DESIGNATION"]);
                $("#userside").text(res["user"]["NAME"]);

            }
            var res = getConstructions();
            if (res["login"] == false) {
                window.location.href = "../index.html";
            }
            if (res["login"] == true && res["lov_const"]) {
                jQuery.each(res["lov_const"], function (index, value) {
                    
                    $("#construction").append("<option value=" + value['CONS_ID'] + " style='text-transform: initial'>" + value['NAME'] + "</option>");
                    
                });


            }


            $('#fine-uploader-manual-trigger').fineUploader({
                template: 'qq-template-manual-trigger',
                autoUpload: false,
                validation: {
                    allowedExtensions: ['pdf', 'docx', 'doc', 'txt']
                },

            });


            $("#construction").select2();
            $("#construction").on("change", function () {
                var const_ID = $("#construction").val();
                if (const_ID) {
                    $.ajax({
                        type: "POST",
                        url: "../controllers/administrator.php",
                        dataType: "JSON",
                        data: { action: "get_data_by_const_ID", const_ID: const_ID },
                        success: function (response) {
                            if (response["login"] == false) {
                                window.location.href = "../index.html";
                            }
                            if (response["login"] == true) {
                                if (response["construction"]) {
                                    
                                    $("#business").val(response["construction"]["BUSINESS"]);
                                    

                                }

                            }

                        }

                    });
                }


            });



        });










    </script>
</body>

</html>