<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Constru App | Administrator De Obra</title>
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
    <link rel="stylesheet" href="plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" href="plugins/datatables-responsive/css/responsive.bootstrap4.min.css">
    <link rel="stylesheet" href="plugins/datatables-buttons/css/buttons.bootstrap4.min.css">
    <link rel="stylesheet" href="dist/css/adminlte.min.css">
    <link rel="stylesheet" href="../administrator/dist/css/fine-uploader-new.css">
    <link rel="stylesheet" href="../administrator/plugins/select2/css/select2.min.css">






    <style>
        #imageUpload {
            display: none;
        }

        #profileImage {
            cursor: pointer;
        }

        #profile-container {
            width: 100%;
            height: 200px;
            overflow: hidden;

        }

        #profile-container img {
            width: 200px;
            height: 200px;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);

        }

        .select2-selection__arrow {
            height: 34px !important;
        }

        #trigger-upload {
            color: white;
            background-color: #00ABC7;
            font-size: 14px;
            padding: 7px 20px;
            background-image: none;
        }

        #fine-uploader-manual-trigger .qq-upload-button {
            margin-right: 15px;
        }

        #fine-uploader-manual-trigger .buttons {
            width: 36%;
        }

        #fine-uploader-manual-trigger .qq-uploader .qq-total-progress-bar-container {
            width: 60%;
        }

        small {
            color: red;
        }

        .social-icons {
            text-align: center;
            font-family: "Open Sans";
            font-weight: 300;
            font-size: 24px;
            color: #333;
        }

        .social-icons h1 {
            margin: 40px 0;
        }

        .social-icons ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .social-icons ul li {
            display: inline-block;
            zoom: 1;
            *display: inline;
            vertical-align: middle;
        }

        .social-icons ul li a {
            display: block;
            margin: 0 5px;
            text-decoration: none;
        }

        .social-icons ul li a i {
            color: #333;
            -webkit-transition: all 0.2s ease-in;
            -moz-transition: all 0.2s ease-in;
            -o-transition: all 0.2s ease-in;
            -ms-transition: all 0.2s ease-in;
            transition: all 0.2s ease-in;
        }

        .social-icons ul li a:focus i,
        .social-icons ul li a:active i {
            transition: none;
            color: #0b161c;
        }
    </style>


</head>

<body class="hold-transition sidebar-mini layout-fixed">
    <div class="wrapper">


        <div class="preloader flex-column justify-content-center align-items-center">
            <img class="animation__shake" src="../img/AdminLTELogo.png"  height="60" width="60">
          </div>
          <nav class="main-header navbar navbar-expand navbar-white navbar-light">
      
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
              </li>
              <li class="nav-item d-none d-sm-inline-block">
                <a href="#" class="nav-link">Nueva Obra</a>
              </li>
      
            </ul>
            <ul class="navbar-nav ml-auto">
      
              <li class="nav-item dropdown">
                <a class="nav-link" id="user" data-toggle="dropdown" href="#"></a>
                <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                  <a href="../controllers/logout.php" class="dropdown-item">Logout</a>
      
      
                </div>
              </li>
      
            </ul>
          </nav>
      
          <aside class="main-sidebar sidebar-dark-primary elevation-4">
      
            <a href="#" class="brand-link">
              <p class="brand-text font-weight-light" style="text-align: center; font-size: 30px; letter-spacing: 1px">CONSTRU
                <strong>APP</strong>
              </p>
            </a>
      
      
            <div class="sidebar">
      
              <div class="user-panel mt-3 pb-3 mb-3 d-flex">
                <div class="image">
      
                  <i class="fas fa-search fa-user" style="font-size: 24px; color: #fff; margin-top: 12px"></i>
                </div>
                <div class="info">
                  <a href="#" class="d-block" id="sidebar_username"></a>
                  <a class="d-block" id="sidebar_user_role" style="font-size: 14px; color: #fff; font-weight: 500; letter-spacing: 1px;"></a>
                </div>
              </div>
      
      
      
              <nav class="mt-2">
                <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
      
                  <li class="nav-header" style="letter-spacing: 1px;">ADMINISTRATOR DE OBRA</li>
      
                  <li class="nav-item">
                    <a href="#" class="nav-link">
                      <i class="nav-icon fas fa-city"></i>
                      <p>
                        Obra
                        <i class="right fas fa-angle-left"></i>
                      </p>
                    </a>
                    <ul class="nav nav-treeview">
                      <li class="nav-item">
                        <a href="constructions.html" class="nav-link">
                          <i class="fas fa-list nav-icon"></i>
                          <p>Lista de Obra</p>
                        </a>
                      </li>
                      <li class="nav-item">
                        <a href="index.html" class="nav-link">
                          <i class="far fa-circle text-info nav-icon"></i>
                          <p>Nueva Obra</p>
                        </a>
                      </li>
                      
      
                    </ul>
                  </li>
                  <li class="nav-item">
                    <a href="#" class="nav-link">
                      <i class="nav-icon fas fa-copy"></i>
                      <p>
                        Documentos
                        <i class="right fas fa-angle-left"></i>
                      </p>
                    </a>
                    <ul class="nav nav-treeview">
                      <li class="nav-item">
                        <a href="documents.html" class="nav-link">
                          <i class="fas fa-folder-open nav-icon"></i>
                          <p>Ver documentos</p>
                        </a>
                      </li>
                      <li class="nav-item">
                        <a href="special-document.html" class="nav-link">
                          <i class="far fa-circle nav-icon text-info"></i>
                          <p>Nueva Documento</p>
                        </a>
                      </li>
                     
      
                    </ul>
                  </li>
                  <li class="nav-item">
                    <a href="#" class="nav-link">
                      <i class="nav-icon fas fa-feather-alt"></i>
                      <p>
                        Multas Y Amonestaciones
                        <i class="right fas fa-angle-left"></i>
                      </p>
                    </a>
                    <ul class="nav nav-treeview">
                      <li class="nav-item">
                        <a href="construction-fines.html" class="nav-link">
                          <i class="fas fa-list nav-icon"></i>
                          <p>Multas Obra</p>
                        </a>
                      </li>
      
      
                      <li class="nav-item">
                        <a href="fine_construction.html" class="nav-link">
                          <i class="far fa-circle nav-icon text-info"></i>
                          <p>Nueva Multa Obra</p>
                        </a>
                      </li>
                    
                      <li class="nav-item">
                        <a href="workers-fines.html" class="nav-link">
                          <i class="fas fa-list nav-icon"></i>
                          <p>Amonestaciones Trabajadores</p>
                        </a>
                      </li>
                      <li class="nav-item">
                        <a href="fine-worker.html" class="nav-link">
                          <i class="far fa-circle nav-icon text-info"></i>
                          <p>Nueva Amonestacion De Trabajador</p>
                        </a>
                      </li>
      
                    </ul>
                  </li>
      
      
                  <li class="nav-item">
                    <a href="workers.html" class="nav-link">
                      <i class="fas fa-user-friends nav-icon"></i>
                      <p>Trabajadores
                      </p>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="new-worker.html" class="nav-link">
                      <i class="fas fa-user-plus nav-icon"></i>
                      <p>Agregar Trabajador/a
                      </p>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="requests.html" class="nav-link">
                      <i class="fas fa-list nav-icon"></i>
                      <p>Ver Solicitudes</p>
                    </a>
                   
                  </li>
                  <li class="nav-item">
                    <a href="comments.html" class="nav-link">
                      <i class="fas fa-comments nav-icon"></i>
                      <p>Comentarios</p>
                    </a>
                   
                  </li>
                  
      
      
      
      
                  <li class="nav-item">
                    <a href="../controllers/logout.php" class="nav-link">
                      <i class="nav-icon far fa-circle text-warning"></i>
                      <p>Logout</p>
                    </a>
                  </li>
      
                </ul>
              </nav>
      
            </div>
      
          </aside>


        <div class="content-wrapper" style="overflow: hidden">
            <section class="content-header">
                <div class="container-fluid">
                    <div class="row mb-2">
                        <div class="col-sm-6">
                            <h1>Modificar Trabajador</h1>
                        </div>
                        <div class="col-sm-6">
                            <ol class="breadcrumb float-sm-right">
                                <li class="breadcrumb-item"><a href="#">Home</a></li>
                                <li class="breadcrumb-item active">Modificar Trabajador </li>
                            </ol>
                        </div>
                    </div>
                </div>
            </section>
            <section class="content">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-12">


                            <div class="card card-default">
                                <input type="text" style="display: none;" class="form-control form-control-sm"
                                id="worker_ID" name="worker_ID"/>
                                <form href="#" id="WorkerForm" enctype="multipart/form-data">
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-8">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label
                                                                style="font-weight: 500; font-size: 14px">Obra</label>
                                                            <select class="form-control form-control-sm"
                                                                id="construction" name="construction">
                                                                <option value="">Seleccione Una Obra</option>

                                                            </select>
                                                            <small></small>
                                                        </div>

                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label
                                                                style="font-weight: 500; font-size: 14px">Empresa</label>
                                                            <input type="text" class="form-control form-control-sm"
                                                                id="business" name="business" readonly />
                                                            <small></small>
                                                        </div>

                                                    </div>


                                                </div>
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <h4>Datos Personales</h4>
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label style="font-weight: 500; font-size: 14px">Rut
                                                                        Trabajador</label>
                                                                    <input type="text"
                                                                        class="form-control form-control-sm" id="rut"
                                                                        name="rut" />
                                                                    <small></small>
                                                                </div>

                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label
                                                                        style="font-weight: 500; font-size: 14px">Nombres
                                                                        Trabajador</label>
                                                                    <input type="text"
                                                                        class="form-control form-control-sm"
                                                                        id="name_worker" name="name_worker" />
                                                                    <small></small>
                                                                </div>

                                                            </div>




                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label
                                                                        style="font-weight: 500; font-size: 14px">Apellido
                                                                        Paterno</label>
                                                                    <input type="text"
                                                                        class="form-control form-control-sm"
                                                                        id="lastname_worker" name="lastname_worker" />
                                                                    <small></small>
                                                                </div>

                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label
                                                                        style="font-weight: 500; font-size: 14px">Apellido
                                                                        Materno</label>
                                                                    <input type="text"
                                                                        class="form-control form-control-sm"
                                                                        id="worker_mother" name="worker_mother" />
                                                                    <small></small>
                                                                </div>

                                                            </div>





                                                        </div>

                                                    </div>



                                                </div>



                                            </div>
                                            <div class="col-md-4 mx-auto text-center">
                                                <label
                                                    style="font-weight: 500; font-size: 14px; margin-bottom: 10px;">Image
                                                    Trabajador</label>

                                                <div id="profile-container">

                                                    <image id="profileImage" src="./dist/img/avatar5.png" />
                                                </div>
                                                <input id="imageUpload" type="file" name="profile_photo"
                                                    placeholder="Photo" required="" capture>
                                                <small id="profile_error"></small>



                                            </div>



                                        </div>
                                        <div class="row">

                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Género</label>
                                                    <select class="form-control form-control-sm" id="gender"
                                                        name="gender">
                                                        <option value="">Seleccione Género</option>
                                                        <option value="M">Masculino</option>
                                                        <option value="F">Mujer</option>
                                                        <option value="O">Otra</option>
                                                    </select>
                                                    <small></small>
                                                </div>

                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Correo</label>
                                                    <input type="text" class="form-control form-control-sm" id="email"
                                                        name="email" />
                                                    <small></small>

                                                </div>

                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Previsión</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        id="forecast" name="forecast" />
                                                    <small></small>

                                                </div>

                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Región</label>
                                                    <input type="text" class="form-control form-control-sm" id="region"
                                                        name="region" />
                                                    <small></small>

                                                </div>

                                            </div>

                                        </div>
                                        <div class="row">

                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Comuna</label>
                                                    <input type="text" class="form-control form-control-sm" id="commune"
                                                        name="commune" />
                                                    <small></small>
                                                </div>

                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Fecha
                                                        Nacimiento</label>
                                                    <input placeholder="Fecha"
                                                        class="form-control mb-2 mr-sm-2 form-control-sm" type="text"
                                                        id="birth_date" name="birth_date" onfocus="(this.type='date')">
                                                    <small></small>

                                                </div>

                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Teléfono</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        id="telephone" name="telephone" />
                                                    <small></small>

                                                </div>

                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">AFP</label>
                                                    <input type="text" class="form-control form-control-sm" id="afp"
                                                        name="afp" />
                                                    <small></small>

                                                </div>

                                            </div>

                                        </div>
                                        <div class="row">

                                            <div class="col-lg-12">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Dirección</label>
                                                    <textarea id="address" name="address" class="form-control"
                                                        rows="4"></textarea>
                                                    <small></small>
                                                </div>

                                            </div>





                                        </div>
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <h4>En Caso De Emergencia Llamar a</h4>

                                            </div>

                                        </div>
                                        <div class="row">

                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Nombre</label>
                                                    <input type="text" class="form-control form-control-sm" id="name"
                                                        name="name" />
                                                    <small></small>
                                                </div>

                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Parentesco</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        id="relation" name="relation" />
                                                    <small></small>

                                                </div>

                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Teléfono</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        id="emergency_phone" name="emergency_phone" />
                                                    <small></small>

                                                </div>

                                            </div>


                                        </div>
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <h4>Datos Laborales</h4>

                                            </div>

                                        </div>
                                        <div class="row">

                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Fecha De Inicio De
                                                        Actividad</label>
                                                    <input placeholder="Fecha"
                                                        class="form-control mb-2 mr-sm-2 form-control-sm" type="text"
                                                        id="start_date" name="start_date" onfocus="(this.type='date')">
                                                    <small></small>
                                                </div>

                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Tipo de
                                                        Contrato</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        id="contract_typ" name="contract_typ" />
                                                    <small></small>

                                                </div>

                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Estado</label>
                                                    <input type="text" class="form-control form-control-sm"
                                                        id="condition" name="condition" />
                                                    <small></small>

                                                </div>

                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label style="font-weight: 500; font-size: 14px">Cargo</label>
                                                    <input type="text" class="form-control form-control-sm" id="post"
                                                        name="post" />
                                                    <small></small>

                                                </div>

                                            </div>


                                        </div>
                                        <h4 id="documents_heading" style="display: none;">Documentos Del Trabajador</h4>
                                        <div class="row" style="margin: 5px" id="div_files">
                                            <!-- <div class="btn-group">
                                                <button type="button" class="btn btn-default"><i
                                                        class="fas fa-folder-open"></i>&nbsp&nbspAction</button>
                                                <button type="button"
                                                    class="btn btn-default dropdown-toggle dropdown-icon"
                                                    data-toggle="dropdown">
                                                    <span class="sr-only">Toggle Dropdown</span>
                                                </button>
                                                <div class="dropdown-menu" role="menu">
                                                    <a class="dropdown-item" href="#">Action</a>
                                                    <a class="dropdown-item" href="#">Another action</a>
                                                    <a class="dropdown-item" href="#">Something else here</a>
                                                    <div class="dropdown-divider"></div>
                                                    <a class="dropdown-item" href="#">Separated link</a>
                                                </div>
                                            </div> -->
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-12" style="margin-top: 10px">
                                                <h4>Cargar Más Documentos</h4>
                                                <div id="fine-uploader-manual-trigger"></div>
                                                <small></small>


                                            </div>

                                        </div>
                                        <div class="row" style="margin-top: 40px">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <button class="btn btn-primary"
                                                        style="float: right; margin-bottom: 20px"
                                                        type="submit">Entregar</button>

                                                </div>

                                            </div>

                                        </div>





                                    </div>
                                </form>

                            </div>

                        </div>

                    </div>

                </div>

            </section>

        </div>

        <footer class="main-footer">
            <p style="text-align: center">Copyright &copy; 2021 <a href="#">ConstruApp</a>. All rights reserved.</p>


        </footer>
        <aside class="control-sidebar control-sidebar-dark">
        </aside>
    </div>

    <script src="plugins/jquery/jquery.min.js"></script>
    <script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="plugins/datatables/jquery.dataTables.min.js"></script>
    <script src="plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
    <script src="plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
    <script src="plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
    <script src="plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
    <script src="plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
    <script src="plugins/jszip/jszip.min.js"></script>
    <script src="plugins/pdfmake/pdfmake.min.js"></script>
    <script src="plugins/pdfmake/vfs_fonts.js"></script>
    <script src="plugins/datatables-buttons/js/buttons.html5.min.js"></script>
    <script src="plugins/datatables-buttons/js/buttons.print.min.js"></script>
    <script src="plugins/datatables-buttons/js/buttons.colVis.min.js"></script>
    <script src="dist/js/adminlte.min.js"></script>
    <script src="dist/js/demo.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.3.5/js/locales/nl.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/0.8.3/purify.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.4.2/Sortable.js"></script>
    <script src="dist/js/functions.js"></script>
    <script src="../administrator/dist/js/jquery.fine-uploader.js"></script>
    <script src="../administrator/plugins/select2/js/select2.min.js"></script>
    <script src="dist/js/jquery.validate.min.js"></script>
    <script src="dist/js/additional-methods.min.js"></script>



    <script type="text/template" id="qq-template-manual-trigger">
        <div class="qq-uploader-selector qq-uploader" qq-drop-area-text="Drop files here">
            <div class="qq-total-progress-bar-container-selector qq-total-progress-bar-container">
                <div role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="qq-total-progress-bar-selector qq-progress-bar qq-total-progress-bar"></div>
            </div>
            <div class="qq-upload-drop-area-selector qq-upload-drop-area" qq-hide-dropzone>
                <span class="qq-upload-drop-area-text-selector"></span>
            </div>
            <div class="buttons">
                <div class="qq-upload-button-selector qq-upload-button">
                    <div>Archivos</div>
                </div>
                
            </div>
            <span class="qq-drop-processing-selector qq-drop-processing">
                <span>Procesando Archivos Caídos...</span>
                <span class="qq-drop-processing-spinner-selector qq-drop-processing-spinner"></span>
            </span>
            <ul class="qq-upload-list-selector qq-upload-list" aria-live="polite" aria-relevant="additions removals">
                <li>
                    <div class="qq-progress-bar-container-selector">
                        <div role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="qq-progress-bar-selector qq-progress-bar"></div>
                    </div>
                    <span class="qq-upload-spinner-selector qq-upload-spinner"></span>
                    <img class="qq-thumbnail-selector" qq-max-size="100" qq-server-scale>
                    <span class="qq-upload-file-selector qq-upload-file"></span>
                    <span class="qq-edit-filename-icon-selector qq-edit-filename-icon" aria-label="Edit filename"></span>
                    <input class="qq-edit-filename-selector qq-edit-filename" tabindex="0" type="text">
                    <span class="qq-upload-size-selector qq-upload-size"></span>
                    <button type="button" class="qq-btn qq-upload-cancel-selector qq-upload-cancel">Cancelar</button>
                    <button type="button" class="qq-btn qq-upload-retry-selector qq-upload-retry">Rever</button>
                    <button type="button" class="qq-btn qq-upload-delete-selector qq-upload-delete">Borrar</button>
                    <span role="status" class="qq-upload-status-text-selector qq-upload-status-text"></span>
                </li>
            </ul>

            <dialog class="qq-alert-dialog-selector">
                <div class="qq-dialog-message-selector"></div>
                <div class="qq-dialog-buttons">
                    <button type="button" class="qq-cancel-button-selector">Close</button>
                </div>
            </dialog>

            <dialog class="qq-confirm-dialog-selector">
                <div class="qq-dialog-message-selector"></div>
                <div class="qq-dialog-buttons">
                    <button type="button" class="qq-cancel-button-selector">No</button>
                    <button type="button" class="qq-ok-button-selector">Yes</button>
                </div>
            </dialog>

            <dialog class="qq-prompt-dialog-selector">
                <div class="qq-dialog-message-selector"></div>
                <input type="text">
                <div class="qq-dialog-buttons">
                    <button type="button" class="qq-cancel-button-selector">Cancel</button>
                    <button type="button" class="qq-ok-button-selector">Ok</button>
                </div>
            </dialog>
        </div>
    </script>


    <!-- <script src="https://releases.transloadit.com/uppy/v1.31.0/uppy.min.js"></script> -->
    <script>
        $("#profileImage").click(function (e) {
            $("#imageUpload").click();
        });

        function fasterPreview(uploader) {
            if (uploader.files && uploader.files[0]) {
                $('#profileImage').attr('src',
                    window.URL.createObjectURL(uploader.files[0]));
            }
        }

        $("#imageUpload").change(function () {
            fasterPreview(this);
        });
    </script>


    <script>
        $(document).ready(function () {

            $("#WorkerForm").on("submit", function (e) {
                e.preventDefault();
                var files = $('#fine-uploader-manual-trigger').fineUploader('getUploads');
                var src = $('#profileImage').attr('src').split('/');
                var file = src[src.length - 1];
                if (file == "avatar5.png") {
                    $("#profile_error").text("Cargue La Imagen Del Trabajador");

                }
                else {
                    $("#profile_error").text("");

                }
                var valid = $("#WorkerForm").valid();
                if (valid == true && file != "avatar5.png") {
                    var form = $("#WorkerForm")[0];
                    var workerData = new FormData(form);
                    workerData.append("action", "update-worker");
                    workerData.append("worker_ID", $("#worker_ID").val());
                    $.each(files, function (index, item) {
                        workerData.append("worker_files[]", item["file"]);

                    });

                    $.ajax({
                        url: "../controllers/administrator.php",// your request url
                        data: workerData,
                        processData: false,
                        contentType: false,
                        dataType: "JSON",
                        type: 'POST',
                        success: function (response) {
                            if (response["login"] == false) {
                                window.location.href = "../index.html";

                            }
                            if (response["login"] == true) {
                                if (response["status"] == true) {
                                    alert("Datos De Usuario Actualizados Con éxito");
                                    window.location.reload();
                                }
                                if (response["status"] == false) {
                                    alert("Ocurrió Un Error. Por Favor, Inténtelo De Nuevo Más Tarde");
                                }

                            }
                        },
                        error: function () {

                        }
                    });

                }



            });


            $("#WorkerForm").validate({
                rules:
                {
                    construction:
                    {
                        required: true,

                    },
                    rut:
                    {
                        required: true,
                    },
                    name_worker:
                    {
                        required: true,
                    },
                    lastname_worker:
                    {
                        required: true,
                    },
                    worker_mother:
                    {
                        required: true,
                    },
                    gender:
                    {
                        required: true,
                    },
                    email:
                    {
                        required: true,
                        email: true
                    },
                    forecast:
                    {
                        required: true,
                    },
                    region:
                    {
                        required: true,
                    },
                    commune:
                    {
                        required: true,
                    },
                    birth_date:
                    {
                        required: true,
                    },
                    telephone:
                    {
                        required: true,
                    },
                    afp:
                    {
                        required: true,
                    },
                    address:
                    {
                        required: true,
                    },
                    name:
                    {
                        required: true,
                    },
                    relation:
                    {
                        required: true,
                    },
                    emergency_phone:
                    {
                        required: true,
                    },
                    start_date:
                    {
                        required: true,
                    },
                    contract_typ:
                    {
                        required: true,
                    },
                    condition:
                    {
                        required: true,
                    },
                    post:
                    {
                        required: true,
                    },

                },
                messages:
                {
                    construction:
                    {
                        required: "Este Campo Es Obligatorio",

                    },
                    rut:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    name_worker:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    lastname_worker:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    worker_mother:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    gender:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    email:
                    {
                        required: "Este Campo Es Obligatorio",
                        email: "Por Favor Introduzca Un Correo Electrónico Válido"
                    },
                    forecast:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    region:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    commune:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    birth_date:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    telephone:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    afp:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    address:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    name:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    relation:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    emergency_phone:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    start_date:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    contract_typ:
                    {
                        required: "Este Campo Es Obligatorio",
                    },
                    condition:
                    {
                        required: "Este Campo Es Obligatorio",

                    },
                    post:
                    {
                        required: "Este Campo Es Obligatorio",

                    },



                },
                errorPlacement: function (error, element) {

                    $(element).next("small").text($(error).text());
                },
                success: function (element) {
                    $(element).next("small").text("");
                },

            });

            var res = getConstructions();
            if (res["login"] == false) {
                window.location.href = "../index.html";
            }
            if (res["login"] == true && res["lov_const"]) {
                jQuery.each(res["lov_const"], function (index, value) {

                    $("#construction").append("<option value=" + value['CONS_ID'] + " style='text-transform: initial'>" + value['NAME'] + "</option>");

                });


            }


            $('#fine-uploader-manual-trigger').fineUploader({
                template: 'qq-template-manual-trigger',
                autoUpload: false,
                validation: {
                    allowedExtensions: ['pdf', 'docx', 'doc', 'txt']
                },

            });


            $("#construction").select2();
            $("#gender").select2();
            $("#construction").on("change", function () {
                var const_ID = $("#construction").val();
                if (const_ID) {
                    $.ajax({
                        type: "POST",
                        url: "../controllers/administrator.php",
                        dataType: "JSON",
                        data: { action: "get_construction_data", const_ID: const_ID },
                        success: function (response) {
                            if (response["login"] == false) {
                                window.location.href = "../index.html";
                            }
                            if (response["login"] == true) {
                                if (response["construction"]) {
                                    $("#business").val(response["construction"][5]);

                                }

                            }

                        }

                    });
                }


            });

            var worker_ID = getParameterFromUrl("Id", window.location.href);
            if (worker_ID == "" || worker_ID == null || worker_ID == undefined || worker_ID == 0) {
                window.location.href = "workers.html";

            }
            else {
                $.ajax({
                    type: "POST",
                    data: { "action": "get_worker_by_id", worker_ID: worker_ID },
                    url: "../controllers/administrator.php",
                    dataType: "JSON",
                    success: function (response) {
                        if (response["login"] == false) {
                            window.location.href = "../index.html";
                        }
                        if (response["login"] == true) {
                            if (response["worker"] != "") {
                                $('#construction').val(response["worker"]["CONSTRUCTION_ID"]).trigger('change');
                                $("#rut").val(response["worker"]["RUT"]);
                                $("#name_worker").val(response["worker"]["NAM"]);
                                $("#lastname_worker").val(response["worker"]["LAST_NAME"]);
                                $("#worker_mother").val(response["worker"]["MOTHER_NAME"]);
                                if(response["worker"]["PROFILE_IMG"] == "dist/img/avatar5.png")
                                {
                                    $("#profileImage").attr("src", response["worker"]["PROFILE_IMG"]);

                                }
                                else
                                {
                                    $("#profileImage").attr("src", "uploads/workers/" + response["worker"]["WORKER_ID"] + "/" + response["worker"]["PROFILE_IMG"]);

                                }
                                $('#gender').val(response["worker"]["GENDER"]).trigger('change');
                                $("#email").val(response["worker"]["EMAIL"]);
                                $("#forecast").val(response["worker"]["FORECAST"]);
                                $("#region").val(response["worker"]["REGION"]);
                                $("#commune").val(response["worker"]["COMMUNE"]);
                                $("#birth_date").val(response["worker"]["DATE_OF_BIRTH"]);
                                $("#telephone").val(response["worker"]["WORKER_TEL"]);
                                $("#afp").val(response["worker"]["AFP"]);
                                $("#address").val(response["worker"]["ADDRESS"]);
                                $("#name").val(response["worker"]["EMERGENCY_CONTACT_NAME"]);
                                $("#relation").val(response["worker"]["RELATION"]);
                                $("#emergency_phone").val(response["worker"]["E_TEL"]);
                                $("#start_date").val(response["worker"]["ST_DATE"]);
                                $("#contract_typ").val(response["worker"]["CONTRACT_TYPE"]);
                                $("#condition").val(response["worker"]["WORKER_CONDITION"]);
                                $("#post").val(response["worker"]["POST"]);
                                $("#worker_ID").val(response["worker"]["WORKER_ID"]);
                                if (response["worker"]["WORKER_FILES"]) {
                                    $("#documents_heading").show();
                                    var worker_files = response["worker"]["WORKER_FILES"];
                                    $.each(worker_files, function (index, file) {
                                        $("#div_files").append('<div class="col-md-6"><div class="btn-group" style="margin: 1px"><button type="button" class="btn btn-link"><i class="fas fa-folder-open"></i>&nbsp&nbsp' + file["FILE_NAME"] + '</button><button type="button" class="btn btn-link dropdown-toggle dropdown-icon" data-toggle="dropdown"><span class="sr-only">Toggle Dropdown</span></button><div class="dropdown-menu" role="menu"> <a id="' + file["FILE_ID"] + '" class="dropdown-item delFile"><i class="fas fa-trash"></i>&nbsp&nbsp Borrar </a><a class="dropdown-item" href="' + file["FILE_PATH"] + '"><i class="fas fa-eye"></i>&nbsp&nbspVista</a></div></div></div>');


                                    });

                                }


                                $(".delFile").on("click", function () {
                                    var FILE_ID = $(this).attr("id");
                                    $.ajax({
                                        type: "POST",
                                        url: "../controllers/administrator.php",
                                        dataType: "JSON",
                                        data: { action: "delete-file-worker", FILE_ID: FILE_ID, WORKER_ID: response["worker"]["WORKER_ID"] },
                                        success: function (response) {
                                            if (response["login"] == false) {
                                                window.location.href = "../index.html";
                                            }
                                            if (response["login"] == true) {
                                                if (response["status"] == true) {
                                                    alert("Documento Eliminado Correctamente");
                                                    window.location.reload();

                                                }

                                            }

                                        }

                                    });


                                });






                            }


                        }

                    }

                });
            }



        });










    </script>
</body>

</html>